import{_ as e,c as t,o as a,a3 as o}from"./chunks/framework.9Buaa5aL.js";const i="/assets/cfd4569a-e7f5-4aac-99bb-b6928612279d.CWTQkpCE.png",r="/assets/0a82f336-5908-4a08-a219-5bcda7fe774e.Byq87BRU.png",n="/assets/91041c0d-3165-422e-aad1-81fd3d27ad41.JkXlDWCd.png",s="/assets/28549954-352c-438e-9feb-176342747292.CBnXPdDG.png",p="/assets/c4a92dbe-430f-44f7-926b-7142e6ff11ce.WCvvbwJP.png",m="/assets/5d2a32ab-f816-4ddb-b4b2-df56e57d64ae.DOqqzeyq.png",l="/assets/a362aab8-2cca-4187-abf2-7ca914a65a87.-R5-Q8du.png",d="/assets/99d04fcd-672b-414f-93ee-64b90724ad42.CIpmnltj.png",h="/assets/d21e9442-6373-4013-a304-ef9d53080d38.ownKQEqq.png",q=JSON.parse('{"title":"{Lighthouse Deep Dive} Performance optimization process (ft. LCP, TBT optimization)","description":"","frontmatter":{"title":"{Lighthouse Deep Dive} Performance optimization process (ft. LCP, TBT optimization)"},"headers":[],"relativePath":"en/fe-dev/optimization/performance-optimization-process.md","filePath":"en/fe-dev/optimization/performance-optimization-process.md"}'),c={name:"en/fe-dev/optimization/performance-optimization-process.md"},f=o('<h1 id="lighthouse-deep-dive-performance-optimization-process-ft-lcp-tbt-optimization" tabindex="-1">{Lighthouse Deep Dive} Performance optimization process (ft. LCP, TBT optimization) <a class="header-anchor" href="#lighthouse-deep-dive-performance-optimization-process-ft-lcp-tbt-optimization" aria-label="Permalink to &quot;{Lighthouse Deep Dive} Performance optimization process (ft. LCP, TBT optimization)&quot;">​</a></h1><p>I happened to measure the blog&#39;s performance with Lighthouse, and the performance score was measured to be around 40 points, indicating poor performance, so I decided to optimize the performance. 🫡</p><p>First, I will show the performance optimization results and then explain how to find problems and solve them.</p><p>index</p><ul><li>📄Performance optimization results</li><li>🖼️LCP Optimization</li><li>💻TBT Optimization</li></ul><h2 id="📄performance-optimization-results" tabindex="-1">📄Performance optimization results <a class="header-anchor" href="#📄performance-optimization-results" aria-label="Permalink to &quot;📄Performance optimization results&quot;">​</a></h2><p><img src="'+i+'" alt="Performance optimization results"></p><p>This is the result of performance optimization after measurement by Lighthouse with a mobile device.</p><p>Largest Contentful Paint (hereinafter referred to as LCP) and Total Blocking Time (hereinafter referred to as TBT) were very poor.</p><p>There are two main points of improving web page performance: (1) resources and (2) main thread. Resource improvement is simpler than main thread improvement, and LCP is greatly affected by resource improvement, so start with LCP first.</p><h3 id="🤔what-is-speed-​​index" tabindex="-1">🤔What is Speed ​​Index? <a class="header-anchor" href="#🤔what-is-speed-​​index" aria-label="Permalink to &quot;🤔What is Speed ​​Index?&quot;">​</a></h3><p>Speed ​​Index naturally improves by improving four items, from First Contentful Paint to Cumulative Layout Shift. So the Speed ​​Index is not improved here. It is recommended that improvements be made last when optimizing performance in the future.</p><h2 id="🖼️lcp-optimization" tabindex="-1">🖼️LCP Optimization <a class="header-anchor" href="#🖼️lcp-optimization" aria-label="Permalink to &quot;🖼️LCP Optimization&quot;">​</a></h2><p>First of all, LCP (Largest Contentful Paint) refers to the largest image or text area on a web page.</p><h3 id="🔎how-to-find-problems" tabindex="-1">🔎How to find problems <a class="header-anchor" href="#🔎how-to-find-problems" aria-label="Permalink to &quot;🔎How to find problems&quot;">​</a></h3><p><img src="'+r+'" alt="LCP How to find problems"></p><p>If you select the LCP tab in the diagnosis area of ​​the Lighthouse report, it will tell you what areas need improvement. If you look at the first item, you can see that the LCP is not good due to the background image effect.</p><p>The background image was used because of the gradient background, but since there is a delay in image loading and rendering, it seems that this will be improved by changing to a gradient using CSS.</p><h3 id="🪄problem-solving" tabindex="-1">🪄Problem Solving <a class="header-anchor" href="#🪄problem-solving" aria-label="Permalink to &quot;🪄Problem Solving&quot;">​</a></h3><p><img src="'+n+'" alt="LCP Problem Solving"></p><p>As shown above, the background was changed to be drawn using CSS.</p><p><img src="'+s+'" alt="LCP result"></p><p>As a result, LCP was reduced by 12.9 seconds, and the previously incorrectly applied gradient UI bug was also resolved.</p><p>Next, we will improve the TBT items related to the main thread. First Contentful Paint (hereinafter referred to as FCP) can be naturally improved by optimizing the main thread, so proceed with FCP before TBT.</p><h2 id="💻tbt-optimization" tabindex="-1">💻TBT Optimization <a class="header-anchor" href="#💻tbt-optimization" aria-label="Permalink to &quot;💻TBT Optimization&quot;">​</a></h2><p>TBT (Total Blocking Time) refers to the total blocking time of the main thread. Main thread blocking operations between first content rendering and interaction start are included in the calculation.</p><h3 id="🔎how-to-find-problems-1" tabindex="-1">🔎How to find problems <a class="header-anchor" href="#🔎how-to-find-problems-1" aria-label="Permalink to &quot;🔎How to find problems&quot;">​</a></h3><p><img src="'+p+'" alt="TBT How to find problems"></p><p>If you look at the second diagnosis, you can see that the Other item takes an abnormally long time. I thought this part was a problem related to JavaScript file requests and debugged it through the performance tab.</p><p><img src="'+m+'" alt="checked the performance"></p><p>I checked the performance tab and found that &quot;HTML parsing&quot; was taking an unusually long time. When I checked &quot;HTML parsing&quot; closely, I found that <code>&lt;link rel=&quot;prefetch&quot;&gt;</code>it was requesting JavaScript files for all pages.</p><p>The blog had over 300 pages, so that many JavaScript files were being requested in advance. Prefetch needed improvement because it had a negative effect on performance when requests increased.</p><h3 id="🪄problem-solving-1" tabindex="-1">🪄Problem Solving <a class="header-anchor" href="#🪄problem-solving-1" aria-label="Permalink to &quot;🪄Problem Solving&quot;">​</a></h3><p><img src="'+l+'" alt="prefetch Problem Solving"></p><p>I set prefetch to be removed in the build settings. Because fast initial loading is more important, prefetch was removed first.</p><p><img src="'+d+'" alt="After removing prefetch"></p><p>After removing prefetch, we were able to remove the pre-requesting JavaScript, and &quot;parsing HTML&quot; became a task that didn&#39;t block the main thread.</p><p><img src="'+h+'" alt="TBT result"></p><p>As a result, TBT returned to a stable state, and FCP improved during the TBT improvement process.👏</p><p>Above we have looked at the performance optimization process using Lighthouse. Improving a web page is often simpler than you think, so give it a try if you have no experience.👍</p>',40),u=[f];function g(b,v,P,w,T,_){return a(),t("div",null,u)}const C=e(c,[["render",g]]);export{q as __pageData,C as default};
