import{_ as s,c as i,o as e,a3 as a}from"./chunks/framework.COm4hYgr.js";const u=JSON.parse('{"title":"Automatically generate DTO code defined in Swagger document","description":"","frontmatter":{},"headers":[],"relativePath":"en/essay/swagger-dto-automation.md","filePath":"en/essay/swagger-dto-automation.md"}'),n={name:"en/essay/swagger-dto-automation.md"},t=a(`<h1 id="automatically-generate-dto-code-defined-in-swagger-document" tabindex="-1">Automatically generate DTO code defined in Swagger document <a class="header-anchor" href="#automatically-generate-dto-code-defined-in-swagger-document" aria-label="Permalink to &quot;Automatically generate DTO code defined in Swagger document&quot;">​</a></h1><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h2><p>This article introduces a project case using TypeScript and Swagger.</p><p>Before using REST API, we often define DTO files by looking at Swagger document. You can manually write DTO files, but by using open source, you can automate it You don&#39;t need to define coding rules separately, and you can easily change DTO when it changes.</p><p>This article introduces how to automatically generate DTO defined in Swagger document and how to bundle routing files for development productivity in large-scale projects.</p><h2 id="automatically-generate-dto-defined-in-swagger-document" tabindex="-1">Automatically generate DTO defined in Swagger document <a class="header-anchor" href="#automatically-generate-dto-defined-in-swagger-document" aria-label="Permalink to &quot;Automatically generate DTO defined in Swagger document&quot;">​</a></h2><p>The DTO of Swagger document can be automatically generated as TypeScript file of the project using <a href="https://www.npmjs.com/package/swagger-typescript-api" target="_blank" rel="noreferrer"><code>swagger-typescript-api</code></a>. In the early introduction, it was difficult to identify the added/modified DTO because the DTO was managed in a single file and Git diff increased.</p><p>You can easily manage files by separating them by using options appropriately. When I used it in the project, I defined it in <code>package.json</code> and used it, and the command and options are as follows.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>swagger-typescript-api -p {Swagger JSON address} -o {DTO file path} --no-client --route-types --modular --sort-types</span></span></code></pre></div><ul><li><code>-p</code> sets the json file address of swagger.</li><li><code>-o</code> sets the location where the swagger DTO file is stored in the project.</li><li><code>--no-client</code> prevents JS code that requests API from being generated when running open source.</li><li><code>--route-types</code> defines API route paths by separating each namespace.</li><li><code>--modular</code> sets whether to separate the file used in common in the API route from the DTO to the <code>data-contracts.ts</code> file.</li><li><code>--sort-types</code> defines DTO by sorting.</li></ul><h2 id="bundle-routing-files" tabindex="-1">Bundle routing files <a class="header-anchor" href="#bundle-routing-files" aria-label="Permalink to &quot;Bundle routing files&quot;">​</a></h2><p>In the field, REST API is different for each service function, and the front-end person in charge is different for each function. In a situation where colleagues use the same repository, common DTO files often cause conflict problems in repository files. Therefore, there are cases where you have to manually resolve conflict problems in code merge or Pull Request.</p><p>To solve this problem, we use <a href="https://www.npmjs.com/package/dts-bundle-generator" target="_blank" rel="noreferrer"><code>dts-bundle-generator</code></a> to bundle DTO files. Bundling works as follows.</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// route.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { CommonProps, CommonName } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./common&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Props</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CommonProps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CommonName</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// common.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CommonProps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    description</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CommonName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>When you have the above file and run the <code>dts-bundle-generator -o bundle.d.ts ./route.ts</code> command, the bundled file is created as follows.</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Generated by dts-bundle-generator v8.0.1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CommonProps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  description</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CommonName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Props</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CommonProps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CommonName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {};</span></span></code></pre></div><h2 id="conclusion" tabindex="-1">Conclusion <a class="header-anchor" href="#conclusion" aria-label="Permalink to &quot;Conclusion&quot;">​</a></h2><p>Finally, TypeScript code generated using open source may differ from the coding rules of the project. This problem can be easily solved by using the eslint or prettier set in the current project when automatically generating the DTO file of Swagger.</p>`,18),l=[t];function o(p,h,r,d,k,c){return e(),i("div",null,l)}const y=s(n,[["render",o]]);export{u as __pageData,y as default};
